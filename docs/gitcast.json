---
layout: none
cast:
  name: podcast
---
{"gitcast":[
  {%- assign cCount = 0 -%}
  {%- for collection in site.collections -%}{% if collection.gitcast == true %}
    {%- if cCount == 1 -%}{{','}}{%- else -%}{%- assign cCount = 1 -%}{%- endif -%}          
    {
      {%- assign post = collection.docs | sort: 'date' | reverse | first -%}
      "castName":"{{ collection.label }}", "maxDate":"{{ post.date | date: "%Y/%m/%d" | default: '1900/01/01' }}", "newToday":
      {%- assign newToday = false -%}
      {%- assign sorted = collection.docs | sort: 'date' | reverse -%}
      {%- for post in sorted -%}
        {%- comment -%}Check date to determine if its published{%- endcomment -%}
        {%- capture nowunix %}{{'now' | date: '%s'}}{% endcapture -%}
        {%- capture posttime %}{{post.date | date: '%s'}}{% endcapture -%}
        {% if posttime == nowunix %} 
          {%- assign newToday = true -%}
        {%- endif -%}
      {%- endfor -%}
      "{{ newToday }}"}
  {%- endif -%}{%- endfor -%}
]}
